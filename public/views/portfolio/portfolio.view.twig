<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Portfolio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        td {
            text-align: right;
        }

        th {
            text-align: right;
        }

        #centered {
            text-align: center;
        }
    </style>
</head>
<body>

{% include 'navBar/navBar.view.twig' %}

<div class="container mt-3">
    <table class="table table-light table-striped table-hover table-condensed" style="  border-radius: 10px; overflow: hidden; margin-top: 1em">
        <thead>
        <tr>
            <th id="centered">Symbol</th>
            <th>Amount</th>
            <th>$ Amount</th>
            <th>Average Cost</th>
            <th>Current Price</th>
            <th>% Profit/Loss</th>
            <th>Link</th>
        </tr>
        </thead>
        <tbody>
        {% for asset in assetList %}
            <tr>
                <td id="centered">{{ asset.symbol }}</td>
                <td>{{ asset.amount|number_format(8, '.', ',') }}</td>
                <td>{{ (asset.amount*asset.currentPrice)|number_format(2, '.', ',') }}</td>
                <td>{{ asset.averageCost|number_format(2, '.', ',') }}</td>
                <td>{{ asset.currentPrice|number_format(2, '.', ',') }}</td>
                <td>
                    {% if asset.currentPrice > asset.averageCost %}
                        <span class="text-success">
                            +{{ (((asset.currentPrice-asset.averageCost)/asset.averageCost)*100)|number_format(2, '.', ',') }} ▲
                        </span>
                    {% else %}
                        <span class="text-danger">
                            {{ (((asset.currentPrice-asset.averageCost)/asset.averageCost)*100)|number_format(2, '.', ',') }} ▼
                        </span>
                    {% endif %}
                </td>
                <td><a href="/?search={{ asset.symbol }}">Link</a></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

{# <div> #}
{#    <a>Asset List:</a> #}
{#    {% for asset in userAssets.assetList %} #}
{#        <div> #}
{#            {{ asset.symbol }}: {{ asset.amount|number_format(5, '.', ',') }} #}
{#            <a>{{ asset.average_cost }}</a> #}
{#            <a>{{ asset.current_price }}</a> #}
{#            {% if asset.current_price > asset.average_cost %} #}
{#                <a style="color: darkgreen">+{{ (((asset.current_price-asset.average_cost)/asset.average_cost)*100)|number_format(2, '.', ',') }} #}
{#                    %</a> #}
{#            {% else %} #}
{#                <a style="color: darkred"> {{ (((asset.current_price-asset.average_cost)/asset.average_cost)*100)|number_format(2, '.', ',') }} #}
{#                    %</a> #}
{#            {% endif %} #}
{#        </div> #}
{#    {% endfor %} #}
{# </div> #}

</body>
</html>